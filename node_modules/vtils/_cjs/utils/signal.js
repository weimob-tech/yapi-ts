"use strict";

exports.__esModule = true;
exports.signal = signal;

/**
 * 信号。
 */
function signal() {
  var _resolve;

  var _reject;

  var resolved = false;
  var resolvedValue;

  var resolve = function resolve(value) {
    if (!resolved) {
      resolved = true;
      resolvedValue = value;
      _resolve == null ? void 0 : _resolve(value);
    }
  };

  var rejected = false;
  var rejectedValue;

  var reject = function reject(value) {
    if (!rejected) {
      rejected = true;
      rejectedValue = value;
      _reject == null ? void 0 : _reject(value);
    }
  };

  var s = new Promise(function ($resolve, $reject) {
    if (resolved) {
      $resolve(resolvedValue);
    } else if (rejected) {
      $reject(rejectedValue);
    } else {
      _resolve = $resolve;
      _reject = $reject;
    }
  });
  s.resolve = resolve;
  s.reject = reject;
  return s;
}